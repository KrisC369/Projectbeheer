%\subsection{Level 1}
\subsubsection{DB Request Handler}
This section handles the decomposition of the DB Request Handler inside the Data Storage component.
\paragraph{Architectural drivers}
\begin{itemize}
	\item \textbf{P2: } Requests to the measurement database\\
	In case of a database failure, a stale cache version should be returned when requests can't be handled.
\end{itemize}
\paragraph{Tactics}
\begin{itemize}
	\item Performance 
	\begin{itemize}
		\item Resource Management \\
		In order to conform to the drivers, a form of cache should be used to maintain multiple copies of data. 
	\end{itemize}
	\item Modifiability 
	\begin{itemize}
		\item Localize Changes \\
		Since this module is the main entry point for requests to the data storage unit, it is important to offer a general interface to the outside components. Generalizing the module will address this.
	\end{itemize}
\end{itemize}
\paragraph{Architectural Patterns}
\begin{itemize}
	\item{Proxy}\\
	A proxy is used to offer the generic data storage component interface to the other components in the system. This improves the simplicity in making requests to the database. This also unifies the different types of database services offered into one accessible interface.
	\item{Active Object}\\ 
	Again the active object is used and implemented as a command alongside a command processor structure. Data transfer objects will be used to transfer data to and from the databases itself.
	\item{Chain of responsibility}\\
	In order to accommodate for the caching of data, the chain of responsibility can be used to give the parallel processor and the Request Cache the opportunity to decide themselves if they can handle a request or if they should forward it. 
The Request Cache component can forward the request to the request process in cache a request is not available in cache and a request to the actual database needs to be made.
\end{itemize}
\inclimg{0.40}{0}{L3DBRequestHandler}{The DB Request Handler after decomposition}
In the diagram of the DB request handler, the ports that are shown to connect this component to the outside components are placed in the same location as the connections of this component in a diagram representing a level higher. 
Such a higher level diagram can be found in figure \ref{fig:L2DataStorage}.
The triplet of outgoing ports connect to the different database instances and the duo of connectors to the side interface with the event channel.

\paragraph{Verification and refinement of drivers}
Using these patterns, the drivers for this decomposition have been fully addressed. There is no real need to decompose this module further.
