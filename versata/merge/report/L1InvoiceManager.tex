%\subsection{Level 1}
\subsubsection{Invoice manager}

\paragraph{Architectural drivers}
This decomposition starts solely with a functional requirement
\begin{itemize}
	\item \textbf{M1: } Dynamic pricing\\
	Room should be left for extending the functionality of the ReMeS system to incorporate a smart billing service. 
Communication between UIS and ReMeS should be made possible.
Billing and invoicing generation and handling should be provided.
All this does not affect remote metering, actuation, leak and anomaly detection.
	\item \textbf{UC15: } Generate invoice\\
	ReMeS processes the measurements since the last bill and constructs the invoice.
	ReMeS contacts the Utility Provider to get contract information and pricing information.
	The invoices are stored in ReMeS and marked as unpaid.
\end{itemize}

\paragraph{Tactics}
\begin{itemize}
	\item Modifiability 
	\begin{itemize}
		\item Defer Binding Time\\
		\item Prevention of ripple effect\\
	\end{itemize}
\end{itemize}


\paragraph{Architectural Patterns}
\begin{itemize}
	\item{Explicit Interface}\\
	The use of an explicit interface allows this component to change it's internal functionality and components independently from the interface it provides to the outside components.

In combination with different ways of triggering the functionality, depending on the final implementation, the components that will be affected by a change, will be minimized. The different ways of triggering have been addressed in the ADD assumptions in section \ref{sec:ADDAssumptions} 
\end{itemize}
\inclimg{0.40}{0}{L2InvoiceManager}{The Invoice Manager after decomposition}

\paragraph{Verification and refinement of drivers}
It is possible to refine some components further since not all functionality has been addressed yet.

\textbf{Invoice generator}
\begin{itemize}
	\item \textbf{UC15: } Generate invoice
\end{itemize}

\textbf{UIS communication handler}
\begin{itemize}
	\item \textbf{M1: } Dynamic pricing
\end{itemize}
