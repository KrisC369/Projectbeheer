%\subsection{Level 1}
\subsubsection{Watchdog}
\paragraph{Architectural drivers}
The main drivers for this component are the quality attributes that are related to the detection of failing components. These events should be detected and operators should be notified within  a certain time interval. In this case the time interval is 5 seconds.
\begin{itemize}
	\item \textbf{AV1: } Measurement database failure
	The detection of failed components happens within 5 seconds.
	\item \textbf{AV2: } Missing measurements
	The failure of any component in the system should be detected and an operator should be notified.
\end{itemize}
\paragraph{Tactics}
The tactics used to effect these drivers are the following.
\begin{itemize}
	\item Availability
	\begin{itemize}
		\item Failure detection \\
		The use of a heartbeat system as described in the upper layer decomposition of the ReMeS system will be used.
	\end{itemize}
\end{itemize}
\paragraph{Architectural Patterns}
\begin{itemize}
	\item{Heartbeat}\\
	Each component for which failures should be detected, should be instantiated with a reference to the watchdog component.
Every component should send at least one heartbeat within a 5 second deadline of the former heartbeat sent. 

The watchdog component monitors these heartbeat and starts tracking a component from the moment a first heartbeat arrives. When the watchdog detects missing heartbeats, a notification is sent to the event channel for all interested parties to see.

Although not one of the main drivers, the modifiability attribute will be affected in a positive manner because of this form of runtime registration. 
Deferring the binding time in this manner causes a lower coupling between this component and the others in the system.
	\item{Publish/Subscribe} \\
	The publish/subscribe pattern which is used in a few other decompositions all over the system, is also used in this component to notify interested parties of a change in state of a component. This change in state is determined by the absence of heartbeats. The event channel depicted, is the same event channel used throughout other components in the system.
\end{itemize}
\inclimg{0.40}{0}{L2Watchdog}{The Watchdog after decomposition}


\paragraph{Verification and refinement of drivers}
All drivers for this decomposition have been addressed. No further decomposition of this module is needed.
